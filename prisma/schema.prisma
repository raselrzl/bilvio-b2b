generator client {
  provider      = "prisma-client-js"
  output        = "../lib/generated/prisma"
  binaryTargets = ["native", "rhel-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id          String  @id @default(cuid())
  UserID      String  @unique
  email       String  @unique
  password    String?
  taxNumber   String? @unique
  companyName String?
  phone       String? @unique
  street      String
  country     String
  city        String
  zipCode     String

  firstName         String?
  lastName          String?
  companyWebsiteUrl String?

  userConcent Boolean @default(false)

  userType       UserType       @default(USER)
  approvalStatus ApprovalStatus @default(PENDING)

  intent Intent?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  products Product[]  @relation("UserProducts")


}

enum UserType {
  USER
  SUPERADMIN
  ADMIN
}

enum ApprovalStatus {
  PENDING
  APPROVED
  REJECTED
  ACTIVE
  INACTIVE
}

enum Intent {
  SALES
  PURCHASES
}


model Product {
  id               String   @id @default(cuid())
  offerNumber      String   @unique
  name             String
  gearbox          Gearbox
  fuel             FuelType
  price            Float
  discount         Float
  type             OfferType
  stock            StockStatus
  colour           String
  quantity         Int
  mileage          Int
  firstRegistration DateTime
  availability     Availability
  trim             String
  engineSpec       String
  vat              Float
  transportCost    Float
  productionYear   Int
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  userId           String?
  user             User?    @relation("UserProducts", fields: [userId], references: [id])
}

enum FuelType {
  PETROL
  DIESEL
  HYBRID
  ELECTRIC
}

enum Gearbox {
  AUTOMATIC
  MANUAL
}

enum StockStatus {
  IN_STOCK
  OUT_OF_STOCK
}

enum Availability {
  IMMEDIATELY
  LATER
}

enum OfferType {
  SUPER
  INTERESTING
  NOT_INTERESTING
  LATER
}


